<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Labirinto: DFS & BFS</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="bg-light">

    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary">
                <i class="bi bi-grid-3x3"></i> Labirinto
            </h1>
            <p class="lead text-muted">Geração via <strong>DFS</strong> e Solução via <strong>BFS</strong></p>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <div class="row g-3 align-items-center justify-content-center">
                    <div class="col-auto">
                        <label for="rows" class="col-form-label fw-bold">Linhas:</label>
                    </div>
                    <div class="col-auto">
                        <input type="number" id="rows" class="form-control" value="10" min="5" max="30"
                            style="width: 80px;">
                    </div>

                    <div class="col-auto">
                        <label for="cols" class="col-form-label fw-bold">Colunas:</label>
                    </div>
                    <div class="col-auto">
                        <input type="number" id="cols" class="form-control" value="15" min="5" max="30"
                            style="width: 80px;">
                    </div>

                    <div class="col-auto ms-3">
                        <button onclick="gerarLabirinto()" class="btn btn-primary">
                            <i class="bi bi-magic"></i> 1. Gerar
                        </button>
                    </div>
                    <div class="col-auto">
                        <button onclick="resolverLabirinto()" class="btn btn-success">
                            <i class="bi bi-geo-alt"></i> 2. Resolver
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="card shadow mb-4">
            <div class="card-body p-0">
                <div id="graph-visualization" class="rounded"></div>
            </div>
        </div>

        <div id="analysis-alert" class="alert alert-secondary text-center fw-bold d-none" role="alert">
            <span id="analysis-results"></span>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <script>
        // Observer para mostrar o alerta quando houver texto
        const targetNode = document.getElementById('analysis-results');
        const alertBox = document.getElementById('analysis-alert');
        const config = { childList: true, characterData: true, subtree: true };

        const callback = (mutationsList) => {
            if (targetNode.innerHTML.trim() !== "") {
                alertBox.classList.remove('d-none');
                // Muda cor baseada no contexto 
                if (targetNode.innerText.includes("Solução")) {
                    alertBox.className = "alert alert-success text-center fw-bold";
                } else {
                    alertBox.className = "alert alert-info text-center fw-bold";
                }
            }
        };
        const observer = new MutationObserver(callback);
        observer.observe(targetNode, config);
    </script>
</body>

</html>